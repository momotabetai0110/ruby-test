# 模擬コーディングテスト Q2: Ruby on Rails 実践形式

## 問題文

タスク管理アプリケーションに「カテゴリー」機能を追加してください。

### 要件

1. **カテゴリーモデルの作成**
   - カテゴリーテーブルを作成し、以下のカラムを持つこと
     - `name` (string, 必須, 最大30文字, 一意)
     - `description` (text, 任意, 最大200文字)
     - `timestamps` (created_at, updated_at)

2. **タスクとカテゴリーの関連付け**
   - タスクは1つのカテゴリーに属する（1対多の関係）
   - タスクテーブルに`category_id`カラムを追加
   - カテゴリーは必須とする

3. **APIエンドポイントの実装**
   - `GET /api/categories` - カテゴリー一覧取得
   - `GET /api/categories/:id` - カテゴリー詳細取得
   - `POST /api/categories` - カテゴリー作成
   - `PATCH /api/categories/:id` - カテゴリー更新
   - `DELETE /api/categories/:id` - カテゴリー削除
   - 既存の`GET /api/tasks`に、カテゴリー情報も含めて返すように修正

4. **バリデーション**
   - カテゴリーモデルに適切なバリデーションを実装
   - タスクモデルのバリデーションに`category_id`の必須チェックを追加

5. **エラーハンドリング**
   - 既存の`Api::TasksController`と同様のエラーハンドリングを実装
   - 存在しないカテゴリーIDが指定された場合の適切な処理

6. **RESTful設計**
   - ルーティングはRESTfulに設計すること
   - 既存のコードスタイルに合わせること

### 制約事項

- 既存のコード（`Task`モデル、`Api::TasksController`など）は可能な限り変更を最小限にすること
- レスポンス形式は既存のAPIと統一すること（`{ status: "OK", result: ... }`形式）
- エラーレスポンスも既存と同様の形式（`{ status: "NG", errors: [...] }`）とすること

### 評価ポイント

- RESTful設計の理解
- バリデーションの適切な実装
- エラーハンドリングの徹底
- コードの可読性・保守性
- 既存コードとの整合性

### 参考：既存のAPIレスポンス形式

**成功時：**
```json
{
  "status": "OK",
  "result": { ... }
}
```

**エラー時：**
```json
{
  "status": "NG",
  "errors": [ "エラーメッセージ1", "エラーメッセージ2" ]
}
```

---

## 解答の提出方法

実装後、以下のコマンドで動作確認してください：

```bash
# マイグレーション実行
bin/rails db:migrate

# サーバー起動
bin/rails server
```

APIの動作確認は、Postmanやcurlコマンドを使用してください。

---

**制限時間：60分（目安）**


